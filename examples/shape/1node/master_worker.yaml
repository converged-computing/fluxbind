# Rule for the "master" node (the first node in the allocation, NODE_ID=0).
# We will bind its tasks starting from core 1, leaving core 0 free for the OS.
- nodes: "0"
  type: core
  formula: "$(($local_rank + 1))"

# A fallback 'default' rule for all "worker" nodes (any node that is NOT NODE_ID=0).
# We will pack tasks tightly starting from core 0 on these nodes.
- default:
    type: core
    formula: "$local_rank"